!function(a){var o,l,n,f,s,c,u,d;function g(){var e,t="<div class='gform-field-filter'>";return t+=function(){var e,t,i=[];for(i.push("<select class='gform-filter-field' name='f[]' >"),e=0;e<n.length;e++)t=function e(t,i){i=i||0;var r,o,l,n,f,s,a,c,u,d="",g=[],h="&nbsp;&nbsp;&nbsp;&nbsp;";o=t.key;if(t.group){for(f=t.filters.length,n=[],c=t.isNestable?i+1:i,r=0;r<f;r++)(s=t.filters[r]).group?(a=e(s,c),n.push(a)):(u=h.repeat(c),l=u+s.text,s=s.key,d=p(s)?'disabled="disabled"':"",n.push('<option {0} value="{1}">{2}</option>'.format(d,s,l)));u=h.repeat(i),i=u+t.text,t.isNestable?g.push('<optgroup label="{0}"></optgroup>{1}'.format(i,n.join(""))):g.push('<optgroup label="{0}">{1}</optgroup>'.format(i,n.join("")))}else d=t.preventMultiple&&p(o)?"disabled='disabled'":"",l=t.text,g.push('<option {0} value="{1}">{2}</option>'.format(d,o,l));return g.join("")}(n[e]),i.push(t);return i.push("</select>"),i.push("<input type='hidden' class='gform-filter-type' name='t[]' value='' >"),i.join("")}()+i()+r()+(e="",u?(e+="<button class='gform-add add_field_choice gform-st-icon gform-st-icon--circle-plus' title='{0}'"+"></button>".format(gf_vars.addFieldFilter),e+="<button class='gform-remove delete_field_choice gform-st-icon gform-st-icon--circle-minus' title='"+gf_vars.removeFieldFilter+"'></button>"):e),t+="</div>"}function h(e){var t=a(e),i=v(t.siblings(".gform-filter-field").val());i&&t.siblings(".gform-filter-value").replaceWith(r(i,e.value)),_(),window.gformInitDatepicker&&gformInitDatepicker()}function m(e){var t=v(e.value);t&&((e=a(e)).siblings(".gform-filter-value").replaceWith(r(t)),e.siblings(".gform-filter-type").val(t.type),e.siblings(".gform-filter-operator").replaceWith(i(t)),e.siblings(".gform-filter-operator").change()),_()}function p(e){e=e.toString();var i=[];return a(".gform-filter-field :selected").each(function(e,t){i[e]=a(t).val()}),-1<a.inArray(e,i)}function i(e){var t,i,r="<select name='o[]' class='gform-filter-operator'>";if(e)for(t=0;t<e.operators.length;t++)i=e.operators[t],r+='<option value="{0}">{1}</option>'.format(i,gf_vars[l[i]]);return r+="</select>"}function r(e,t){var i,r,o,l,n,f="",s="gform-filter-value";if(e&&void 0!==e.cssClass&&(s+=" "+e.cssClass),e&&e.values&&"contains"!=t){for(void 0!==e.placeholder&&(f+='<option value="">{0}</option>'.format(e.placeholder)),i=0;i<e.values.length;i++)r=e.values[i].value,o=e.values[i].text,e.values[i].operators&&-1===a.inArray(t,e.values[i].operators)||(f+='<option value="{0}">{1}</option>'.format(r,o));l="<select name='v[]' class='{0}'>{1}</select>".format(s,f)}else n=e&&void 0!==e.placeholder?"placeholder='{0}'".format(e.placeholder):"",l="<input type='text' value='' name='v[]' class='{0}' {1}/>".format(s,n);return l}function v(e,t){var i;if(e){t=t||n;for(var r=0;r<t.length;r++){if(e==t[r].key)return t[r];if(t[r].group&&(i=v(e,t[r].filters)))return i}}}function b(){var e;c&&(e=a("#gform-field-filters"),a(".gform-field-filter").length<=1?a(o).hasClass("ui-resizable")&&o.resizable("destroy"):e.get(0).scrollHeight>o.height()||o.height()>=d?(o.css({"min-height":d+"px","border-bottom":"5px double #DDD"}).resizable({handles:"s",minHeight:d}),e.css("min-height",d)):o.css({"min-height":"","border-bottom":""}))}function y(){var e="";e+="<div id='gform-no-filters' >"+gf_vars.addFieldFilter,e+="<button class='gform-add add_field_choice gform-st-icon gform-st-icon--circle-plus' title='{0}'"+"></div>".format(gf_vars.addFieldFilter),a("#gform-field-filters").html(e),c&&(o.css({"min-height":"","border-bottom":""}),o.height(80),a("#gform-field-filters").css("min-height",""))}function _(){a("select.gform-filter-field option").removeAttr("disabled"),a("select.gform-filter-field").each(function(e){var t=v(this.value);void 0!==t&&t.preventMultiple&&p(this.value)&&a("select.gform-filter-field option[value='"+this.value+"']:not(:selected)").attr("disabled","disabled")})}function F(e){e='<select name="mode"><option value="all" {0}>{1}</option><option value="any" {2}>{3}</option></select>'.format(t("all",e),gf_vars.all,t("any",e),gf_vars.any);return gf_vars.filterAndAny.format(e)}function t(e,t){return e==t?'selected="selected"':""}function j(e){var e=a(e),e=e.is("button")?e.parent():e;e.after(g()),e.next("div").find(".gform-filter-field").change().find(".gform-filter-operator").change(),1==a(".gform-field-filter").length&&e.after(F()),b()}function k(e){a(e).parent().remove(),0==a(".gform-field-filter").length&&y(),_(),b()}a.fn.gfFilterUI=function(e,t,i,r){return e=e,t=t,i=i,r=r,(o=a(this)).css("position","relative").html('<div id="gform-field-filters"></div>'),c=void 0!==(d=r)&&0<d,l={is:"is",isnot:"isNot",">":"greaterThan","<":"lessThan",contains:"contains",starts_with:"startsWith",ends_with:"endsWith"},gf_vars.baseUrl,n=e,f=t&&t.filters?t.filters:[],s=t&&t.mode?t.mode:"all",u=!(void 0!==i&&!i),function(t){var e;if(o.on("change",".gform-filter-field",function(){m(this)}),o.on("click","#gform-no-filters",function(){if(a(".gform-field-filter").length==0)j(this);a(this).remove()}),o.on("click",".gform-add",function(e){j(this);e.preventDefault()}),o.on("click",".gform-remove",function(){k(this)}),o.on("change",".gform-filter-operator",function(){h(this,this.value)}),void 0!==t&&0!=t.length){for("off"!=s&&a("#gform-field-filters").append(F(s)),e=0;e<t.length;e++)a("#gform-field-filters").append(g());a(".gform-filter-field").each(function(e){e=t[e].field;jQuery(this).val(e),m(this)}),a(".gform-filter-operator").each(function(e){e=t[e].operator;jQuery(this).val(e),h(this,this.value)}),a(".gform-filter-value").each(function(e){e=t[e].value;jQuery(this).val(e),jQuery(this).change()}),b()}else y()}(f),this},String.prototype.format=function(){var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==i[t]?i[t]:e})}}((window.gfFilterUI=window.gfFilterUI||{},jQuery));